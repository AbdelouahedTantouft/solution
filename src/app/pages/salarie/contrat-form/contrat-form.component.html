<div class="container mx-auto p-4">
  <form
    [formGroup]="employeeForm"
    (ngSubmit)="onSaveAndContinue()"
    class="bg-white rounded-md shadow-md p-4"
  >
    <!-- Two column layout -->
    <div class="flex flex-col md:flex-row">
      <!-- Left Column -->
      <div class="w-full md:w-1/2 p-4 border-r border-gray-200">
        <!-- Position Section -->
        <div class="mb-6">
          <h2 class="text-xl font-medium text-gray-700 mb-4">Poste</h2>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Fonction</label
            >
            <div class="flex">
              <div
                class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"
              ></div>
              <div class="w-3/4 relative">
                <input
                  [(ngModel)]="searchInputs['fonction'].value"
                  (input)="filterOptions('fonction')"
                  (focus)="openPanel('fonction')"
                  type="text"
                  formControlName="fonction"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />

                <!-- üîç Button -->
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('fonction')"
                >
                  <i class="fas fa-search"></i>
                </button>

                <div
                  *ngIf="isPanelOpen('fonction')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div
                    class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b"
                  >
                    <h3 class="text-sm font-semibold">fonction</h3>
                    <button
                      (click)="togglePanel('fonction')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>

                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs.fonction.filtered"
                        (click)="selectOption('fonction', option)"
                        class="px-2 py-1 hover:bg-blue-100 cursor-pointer"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1">
              Cat√©gorie
            </label>
            <div class="flex">
              <div class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"></div>
              <div class="w-3/4 relative">
                <input
                  [(ngModel)]="searchInputs['categorie'].value"
                  (input)="filterOptions('categorie')"
                  (focus)="openPanel('categorie')"
                  type="text"
                  formControlName="categorie"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Cat√©gorie"
                />
          
                <!-- üîç Button -->
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('categorie')"
                >
                  <i class="fas fa-search"></i>
                </button>
          
                <!-- Filtered Results -->
                <div
                  *ngIf="isPanelOpen('categorie')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b">
                    <h3 class="text-sm font-semibold">Cat√©gorie</h3>
                    <button
                      (click)="togglePanel('categorie')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>
          
                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs['categorie'].filtered"
                        (click)="selectOption('categorie', option)"
                        class="px-2 py-1 hover:bg-blue-100 cursor-pointer"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Service</label
            >
            <div class="flex">
              <div
                class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"
              ></div>
              <div class="w-3/4 relative">
                <input
                  type="text"
                  formControlName="service"
                  [(ngModel)]="searchInputs['service'].value"
                  (ngModelChange)="onInputChange('service', $event)"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <!-- üîç Button -->
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('service')"
                >
                  <i class="fas fa-search"></i>
                </button>

                <div
                  *ngIf="isPanelOpen('service')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div
                    class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b"
                  >
                    <h3 class="text-sm font-semibold">Service</h3>
                    <button
                      (click)="togglePanel('service')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>

                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs['service'].filtered"
                        class="py-1 cursor-pointer hover:bg-blue-100 px-2 rounded"
                        (click)="selectOption('service', option)"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Site</label
            >
            <div class="flex">
              <div
                class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"
              ></div>
              <div class="w-3/4 relative">
                <input
                  type="text"
                  formControlName="site"
                  [(ngModel)]="searchInputs['site'].value"
                  (ngModelChange)="onInputChange('site', $event)"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />

                <!-- üîç Button -->
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('site')"
                >
                  <i class="fas fa-search"></i>
                </button>

                <div
                  *ngIf="isPanelOpen('site')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div
                    class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b"
                  >
                    <h3 class="text-sm font-semibold">Site</h3>
                    <button
                      (click)="togglePanel('site')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>

                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs['site'].filtered"
                        class="py-1 cursor-pointer hover:bg-blue-100 px-2 rounded"
                        (click)="selectOption('site', option)"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- √âtablissement Section -->
        <div class="mb-6">
          <h2 class="text-xl font-medium text-gray-700 mb-4">√âtablissement</h2>

          <!-- Filiale -->
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Filiale</label
            >
            <div class="flex">
              <div
                class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"
              ></div>
              <div class="w-3/4 relative">
                <input
                  type="text"
                  formControlName="filiale"
                  [(ngModel)]="searchInputs['filiale'].value"
                  (ngModelChange)="onInputChange('filiale', $event)"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('filiale')"
                >
                  <i class="fas fa-search"></i>
                </button>

                <div
                  *ngIf="isPanelOpen('filiale')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div
                    class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b"
                  >
                    <h3 class="text-sm font-semibold">Filiale</h3>
                    <button
                      (click)="togglePanel('filiale')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>
                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs['filiale'].filtered"
                        class="py-1 cursor-pointer hover:bg-blue-100 px-2 rounded"
                        (click)="selectOption('filiale', option)"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- P√¥le -->
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >P√¥le</label
            >
            <div class="flex">
              <div
                class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"
              ></div>
              <div class="w-3/4 relative">
                <input
                  type="text"
                  formControlName="pole"
                  [(ngModel)]="searchInputs['pole'].value"
                  (ngModelChange)="onInputChange('pole', $event)"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('pole')"
                >
                  <i class="fas fa-search"></i>
                </button>

                <div
                  *ngIf="isPanelOpen('pole')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div
                    class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b"
                  >
                    <h3 class="text-sm font-semibold">P√¥le</h3>
                    <button
                      (click)="togglePanel('pole')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>
                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs['pole'].filtered"
                        class="py-1 cursor-pointer hover:bg-blue-100 px-2 rounded"
                        (click)="selectOption('pole', option)"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Emploi Section -->
        <div class="mb-6">
          <h2 class="text-xl font-medium text-gray-700 mb-4">Emploi</h2>

          <!-- Cat√©gorie sociopro -->
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1">Cat√©gorie sociopro</label>
            <div class="flex">
              <div class="w-1/4 bg-gray-100 border border-gray-300 rounded-l-md p-2"></div>
              <div class="w-3/4 relative">
                <input
                  type="text"
                  formControlName="categorieSociopro"
                  [(ngModel)]="searchInputs['categorieSociopro'].value"
                  (ngModelChange)="onInputChange('categorieSociopro', $event)"
                  class="w-full border border-gray-300 p-2 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <button
                  type="button"
                  class="absolute right-2 top-2 text-blue-500"
                  (click)="togglePanel('categorieSociopro')"
                >
                  <i class="fas fa-search"></i>
                </button>

                <div
                  *ngIf="isPanelOpen('categorieSociopro')"
                  class="absolute z-10 top-full mt-2 left-0 w-full border rounded shadow-md bg-white"
                >
                  <div class="flex justify-between items-center bg-gray-100 px-3 py-2 border-b">
                    <h3 class="text-sm font-semibold">Emploi</h3>
                    <button
                      (click)="togglePanel('categorieSociopro')"
                      class="text-lg font-bold text-gray-700"
                    >
                      √ó
                    </button>
                  </div>
                  <div class="p-4 max-h-40 overflow-y-auto">
                    <ul>
                      <li
                        *ngFor="let option of searchInputs['categorieSociopro'].filtered"
                        class="py-1 cursor-pointer hover:bg-blue-100 px-2 rounded"
                        (click)="selectOption('categorieSociopro', option)"
                      >
                        {{ option }}
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- Right Column -->
      <div class="w-full md:w-1/2 p-4">
        <!-- Contract Section -->
        <div class="mb-6">
          <h2 class="text-xl font-medium text-gray-700 mb-4">
            Contrat de travail
          </h2>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Date d'embauche</label
            >
            <input
              type="date"
              formControlName="dateEmbauche"
              placeholder="__/__/____"
              class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >P√©riode d'essai (Mois)</label
            >
            <input
              type="text"
              formControlName="periodeEssai"
              class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Date de confirmation poste</label
            >
            <div class="flex gap-2">
              <input
                type="date"
                formControlName="dateConfirmationPoste"
                placeholder="__/__/____"
                class="w-3/5 border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <button
                type="button"
                class="w-2/5 bg-gray-200 text-gray-700 p-2 rounded-md flex items-center justify-center gap-2"
              >
                <span>Tableau anciennet√© des salari√©s</span>
              </button>
            </div>
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Nature de contrat</label
            >
            <div class="flex gap-2">
              <select
                formControlName="natureContrat"
                class="w-3/5 border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option value="">S√©lectionner</option>
                <option
                  *ngFor="let option of contractTypeOptions"
                  [value]="option"
                >
                  {{ option }}
                </option>
              </select>
              <button
                type="button"
                class="w-2/5 bg-blue-500 text-white p-2 rounded-md flex items-center justify-center gap-2"
              >
                <i class="fas fa-file-contract"></i>
                <span>Contrat</span>
              </button>
            </div>
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Date de d√©but</label
            >
            <input
              type="date"
              formControlName="dateDebut"
              placeholder="__/__/____"
              class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Date de Fin</label
            >
            <input
              type="date"
              formControlName="dateFin"
              placeholder="__/__/____"
              class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-600 mb-1"
              >Statut</label
            >
            <div class="mt-2">
              <div class="flex items-center mb-2">
                <input
                  type="radio"
                  id="permanent"
                  formControlName="statut"
                  value="Permanent"
                  class="mr-2"
                />
                <label for="permanent">Permanent</label>
              </div>
              <div class="flex items-center mb-2">
                <input
                  type="radio"
                  id="stagiaire"
                  formControlName="statut"
                  value="Stagiaire"
                  class="mr-2"
                />
                <label for="stagiaire">Stagiaire</label>
              </div>
              <div class="flex items-center mb-2">
                <input
                  type="radio"
                  id="occasionnel"
                  formControlName="statut"
                  value="Occasionnel"
                  class="mr-2"
                />
                <label for="occasionnel">Occasionnel</label>
              </div>
              <div class="flex items-center">
                <input
                  type="radio"
                  id="temporaire"
                  formControlName="statut"
                  value="Temporaire"
                  class="mr-2"
                />
                <label for="temporaire">Temporaire</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Departure Section -->
        <div class="mb-6">
          <h2 class="text-xl font-medium text-gray-700 mb-4">D√©part</h2>

          <div class="mb-3 flex gap-4">
            <div class="w-1/2">
              <label class="block text-sm font-medium text-gray-600 mb-1"
                >Date de d√©part</label
              >
              <input
                type="date"
                formControlName="dateDepart"
                placeholder="__/__/____"
                class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <div class="w-1/2">
              <label class="block text-sm font-medium text-gray-600 mb-1"
                >Motif de d√©part</label
              >
              <div class="relative">
                <select
                  formControlName="motifDepart"
                  class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">S√©lectionner</option>
                  <option
                    *ngFor="let option of departureReasonOptions"
                    [value]="option"
                  >
                    {{ option }}
                  </option>
                </select>
                <div class="absolute right-0 top-0 h-full flex items-center">
                  <div
                    class="bg-gray-700 h-full flex items-center justify-center px-4 rounded-r-md"
                  >
                    <i class="fas fa-camera text-white"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="mt-6 mb-4">
      <button
        type="submit"
        class="px-4 py-2 bg-blue-600 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
      >
        Enregistrer et continuer
      </button>
    </div>
  </form>
</div>
