<div class="w-full bg-neutral-magnolia flex items-center justify-center">
  <div
    class="w-full rounded-2xl overflow-hidden bg-white shadow-lg flex flex-col"
  >
    <!-- Removed md:flex-row -->
    <!-- Full-width Stepper Header -->
    <div
      class="w-full bg-primary-purplish-blue md:py-6 md:px-10 bg-no-repeat bg-cover flex-shrink-0"
    >
      <app-stepper [currentStep]="currentStep" [totalSteps]="4"></app-stepper>
    </div>

    <!-- Main Form Area -->
    <div class="md:w-2/3 lg:w-full py-2 px-2 md:px-10 md:py-10">
      <div>
        <!-- Step 1: Personal Info -->
        <div
          *ngIf="currentStep === 1"
          class="w-full relative animate-fade-in border-2 border-gray-200 rounded-lg p-6 pt-8 mt-4"
        >
          <app-etat-civil-form></app-etat-civil-form>
        </div>

        <!-- Step 2: Select Plan -->
        <div *ngIf="currentStep === 2" class="animate-fade-in">
          <app-etat-civil-etap2></app-etat-civil-etap2>
        </div>

        <!-- Step 3: contrat-form -->
        <div *ngIf="currentStep === 3" class="animate-fade-in">
          <app-contrat-form></app-contrat-form>
        </div>

        <!-- Step 4: organizations socails -->
        <div *ngIf="currentStep === 4 && !completed" class="animate-fade-in">
          <app-organizations-socails-form></app-organizations-socails-form>
        </div>
        <!-- Step 5: payment bank -->
        <div *ngIf="currentStep === 5 && !completed" class="animate-fade-in">
          <app-bank-payment-form></app-bank-payment-form>
        </div>
        <!-- Step 6: payment bank -->
        <div *ngIf="currentStep === 6 && !completed" class="animate-fade-in">
          <app-bulletin-model></app-bulletin-model>
        </div>
        <!-- Step 7: payment bank -->
        <div *ngIf="currentStep === 7 && !completed" class="animate-fade-in">
          <app-conge-form></app-conge-form>
        </div>

        <!-- Thank You Screen -->
        <div
          *ngIf="currentStep === 8"
          class="animate-fade-in text-center py-6 px-4"
        >
          <div
            class="mx-auto w-16 h-16 bg-primary-purplish-blue bg-opacity-10 rounded-full flex items-center justify-center mb-6"
          >
            <svg
              class="w-8 h-8 text-primary-purplish-blue"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <h1 class="text-2xl md:text-3xl font-bold text-primary-marine mb-4">
            Fiche Salarié
          </h1>

          <!-- Identité -->
          <h2 class="font-semibold mt-6 mb-2">Informations Personnelles</h2>
          <table class="w-full text-left border mb-4">
            <tr>
              <th>Nom</th>
              <td>{{ formData["1"].nom }}</td>
            </tr>
            <tr>
              <th>Prénom</th>
              <td>{{ formData["1"].prenom }}</td>
            </tr>
            <tr>
              <th>Sexe</th>
              <td>{{ formData[1].sexe }}</td>
            </tr>
            <tr>
              <th>Date de Naissance</th>
              <td>{{ formData["1"].dateNaissance }}</td>
            </tr>
            <tr>
              <th>Nationalité</th>
              <td>{{ formData["1"].nationalite }}</td>
            </tr>
            <tr>
              <th>Email</th>
              <td>{{ formData["1"].email }}</td>
            </tr>
            <tr>
              <th>Téléphone</th>
              <td>{{ formData["1"].phone }}</td>
            </tr>
          </table>

          <!-- Poste -->
          <h2 class="font-semibold mt-6 mb-2">Poste & Contrat</h2>
          <table class="w-full text-left border mb-4">
            <tr>
              <th>Poste</th>
              <td>{{ formData[3].poste }}</td>
            </tr>
            <tr>
              <th>Fonction</th>
              <td>{{ formData[3].fonction }}</td>
            </tr>
            <tr>
              <th>Service</th>
              <td>{{ formData[3].service }}</td>
            </tr>
            <tr>
              <th>Catégorie</th>
              <td>{{ formData[3].categorie }}</td>
            </tr>
            <tr>
              <th>Date d'embauche</th>
              <td>{{ formData[3].dateEmbauche }}</td>
            </tr>
            <tr>
              <th>Nature du contrat</th>
              <td>{{ formData[3].natureContrat }}</td>
            </tr>
            <tr>
              <th>Statut</th>
              <td>{{ formData[3].statut }}</td>
            </tr>
          </table>

          <!-- Salaire -->
          <h2 class="font-semibold mt-6 mb-2">Salaire</h2>
          <table class="w-full text-left border mb-4">
            <tr>
              <th>Salaire de base</th>
              <td>{{ formData[6].salaireBase }}</td>
            </tr>
            <tr>
              <th>Indemnité de transport</th>
              <td>{{ formData[6].indemniteTransport }}</td>
            </tr>
            <tr>
              <th>Prime d'ancienneté</th>
              <td>{{ formData[6].primeAnciennete }}</td>
            </tr>
            <tr>
              <th>Heures supplémentaires</th>
              <td>{{ formData[6].heuresSupp }}</td>
            </tr>
            <tr>
              <th>Cotisations sociales</th>
              <td>{{ formData[6].cotisationsSociales }}</td>
            </tr>
          </table>

          <!-- Congés -->
          <h2 class="font-semibold mt-6 mb-2">Congés</h2>
          <table class="w-full text-left border mb-4">
            <tr>
              <th>Solde Congé</th>
              <td>{{ formData[7].soldeConge }}</td>
            </tr>
            <tr>
              <th>Régul. Congé</th>
              <td>{{ formData[7].regulConge }}</td>
            </tr>
            <tr>
              <th>Type d’acquis</th>
              <td>{{ formData[7].acquisType }}</td>
            </tr>
            <tr>
              <th>Valeur annuelle des acquis</th>
              <td>{{ formData[7].valeurAcquisAnnuelle }}</td>
            </tr>
          </table>

          <div class="flex space-x-4">
            <button
              (click)="exportData()"
              class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded flex items-center"
              [disabled]="isLoading"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
              Export to CSV
            </button>

            <button
            (click)="navigateToListe()"
            class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded flex items-center"
            [disabled]="isLoading"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 mr-2"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z"
                clip-rule="evenodd"
              />
            </svg>
            Terminé
          </button>
          
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div *ngIf="!completed" class="mt-auto pt-10 flex justify-between">
          <button
            [disabled]="currentStep === 1"
            (click)="goToPrevStep()"
            class="px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"
          >
            Précédent
          </button>

          <button
            *ngIf="currentStep === totalSteps"
            (click)="completeForm()"
            class="px-4 py-2 bg-green-600 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
          >
            Terminer
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
